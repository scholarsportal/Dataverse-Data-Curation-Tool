<div class="relative w-full min-h-8 h-full">
  <dialog #dropdown class="z-20 w-full rounded" [ngClass]="computedPosition()">
    <div class="w-full min-h-14 overflow-auto flex flex-col rounded border border-light-outline-variant">
      @for (item of itemList() | keyvalue; track item.key) {
        <label class="px-2" for="{{ item.key }}">
          <input
            type="checkbox"
            [id]="item.key"
            [name]="item.key"
            [value]="item.key"
            [checked]="checkSelected(item.key)"
            (change)="changeSelected(item.key)"
          />
          {{ item.value }}
        </label>
      } @empty {
        <span class="mx-auto my-auto">{{ emptySetPlaceholderText() }}</span>
      }
    </div>
  </dialog>
  <button
    class="rounded border border-light-outline-variant absolute justify-start min-h-8 h-full w-full py-0.5 pr-0"
    (click)="toggleDialog()"
  >
    <div class="flex flex-row">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="currentColor"
        class="w-5 h-5 self-center mx-2"
      >
        <path
          fill-rule="evenodd"
          d="M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z"
          clip-rule="evenodd"
        />
      </svg>
      @if (selectedItems().length) {
        <ul
          class="flex flex-row my-0.5 overflow-y-hidden static overflow-x-auto"
        >
          @for (item of (selectedItemsMatched() | keyvalue); track item.key) {
            <li id="$index" class="input-chip">
              {{ item.value }}
            </li>
          }
        </ul>
      } @else if (!selectedItems().length && (itemList() | keyvalue).length) {
        <span class="self-center button-label pr-5">{{ emptyPlaceholderText() }}</span>
      } @else if (!selectedItems().length && !(itemList() | keyvalue).length) {
        <span class="self-center button-label pr-5">{{ emptySetPlaceholderText() }}</span>
      }
    </div>
  </button>
</div>
