<div class="rows-and-columns mx-auto my-auto">
  @for (row of $rows(); track $index) {
    <dct-dropdown
      [$index]="$index"
      [$groups]="$groups()"
      [$variables]="$variables()"
      [$categories]="$rowCategories()"
      [$rowsOrColumns]="'rows'"
      [$selectedVariable]="row.variableID"
      [$variablesAlreadySelected]="$rows()"
      (changeSelectedVariable)="changeVariable($event)"
    ></dct-dropdown>
  }
  @for (column of $columns(); track $index) {
    <dct-dropdown
      [$index]="$index"
      [$groups]="$groups()"
      [$variables]="$variables()"
      [$categories]="$columnCategories()"
      [$rowsOrColumns]="'columns'"
      [$selectedVariable]="column.variableID"
      [$variablesAlreadySelected]="$columns()"
      (changeSelectedVariable)="changeVariable($event)"
    ></dct-dropdown>
  }
  @if (!$columns().length && !$rows().length) {
    <span class="blur-0">
      Nothing here yet. Start adding rows and columns to build your table.
    </span>
  }
</div>
<div class="mx-auto my-auto controls-and-button">
  <button class="add-new surface on-surface-text" (click)="addNewEmptyRow()">
    Add Row
  </button>
  <button
    class="add-new on-surface-variant on-surface-text"
    (click)="addNewEmptyColumn()"
  >
    Add Column
  </button>
  <button class="add-new secondary on-secondary-text">View Graph</button>
</div>
<dct-cross-table
  class="mx-auto my-auto graph-area"
  [data]="table$ | async"
></dct-cross-table>
<!-- @if (table$ | async) {
         } -->
